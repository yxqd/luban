#!/usr/bin/env python
#
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#                                 Jiao Lin
#                      California Institute of Technology
#                      (C) 2006-2009  All Rights Reserved
#
# {LicenseText}
#
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#


from luban.components.Actor import Actor as base
class Actor(base):

    class Inventory(base.Inventory):

        import pyre.inventory


    def default(self, director):
        return self.testClear(director)
    

    def testClear(self, director):
        from luban.content.Page import Page
        page = Page('test page')
        document = page.document()
        splitter = document.splitter()
        left = splitter.document()
        right = splitter.document(id='rightcolumn')

        from luban.content import load
        
        from luban.content.Portlet import Portlet as portlet
        portlet = portlet(title="main", id="portlet-main--tree")
        left.add(portlet)
        
        portletitem1 = portlet.item(label="Clear")
        portletitem1.icon = "images/link_icon.gif"
        portletitem1.type = "navItem"
        portletitem1.onclick = load(
            actor='test-weaver-portletitem-action',
            routine='clear',
            )
        
        p = right.paragraph()
        p.text = ['I am the right column.']
        return page
    
    
    def clear(self, director):
        from luban.content import select
        return select(id='rightcolumn').empty()


    def testReplace(self, director):
        from luban.content.Page import Page
        page = Page('test page')
        document = page.document()
        splitter = document.splitter()
        left = splitter.document()
        right = splitter.document(id='rightcolumn')

        from luban.content import load
        
        from luban.content.Portlet import Portlet as portlet
        portlet = portlet(title="main", id="portlet-main--tree")
        left.add(portlet)
        
        portletitem1 = portlet.item(label="Replace")
        portletitem1.icon = "images/link_icon.gif"
        portletitem1.type = "navItem"
        portletitem1.onclick = load(
            actor='test-weaver-portletitem-action',
            routine='replace',
            )
        
        p = right.paragraph()
        p.text = ['I am the right column.']
        return page


    def replace(self, director):
        from luban.content.Document import Document
        doc = Document(title='new document')
        p = doc.paragraph()
        p.text = ['I am the new right hand side document.']
        
        from luban.content import select
        return select(id='rightcolumn').replaceContent(doc)
    
    
    def __init__(self, *args, **kwds):
        super(Actor, self).__init__(*args, **kwds)
        return


    def _init(self):
        super(Actor, self)._init()
        return



def actor():
    return Actor('test-weaver-portletitem-action')


# version
__id__ = "$Id$"

# End of file 
